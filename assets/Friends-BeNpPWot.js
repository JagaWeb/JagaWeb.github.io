import{_ as B,j as i,r as h,o as F,h as r,a as n,e as g,k as A,u as d,l as x,C,n as _,t as k,f as $,g as p,F as N,b as S,i as V}from"./index-D5jOy2CM.js";const j={class:"user_profile"},D={class:"user_logo"},L={key:1,class:"loader"},R=["disabled"],q={key:1,class:"loadBtn"},z={__name:"Friend",props:{friendId:{type:Number,required:!0}},setup(b){const u=b,f=i("theme"),m=i("user_Id"),a=i("urlAdressAuth"),c=h([]),t=h(!0),l=h(!1),s=h([]),I=async v=>{try{const e=await p.get(`${a}?user_id=${v}`);c.value=e.data[0],l.value=!1}catch(e){console.log(e)}},w=async v=>{l.value=!0;try{if(!m){console.error("UserId не найден в localStorage");return}const e=await p.get(`${a}?user_id=${m}`);if(!e.data||!e.data[0]){console.error("Данные пользователя не найдены");return}s.value=e.data[0].users_subsribe,console.log(s.value);const y=s.value.findIndex(o=>o===v);if(y!==-1){s.value.splice(y,1);try{const o=await p.put(`${a}/${e.data[0].id}`,{users_subsribe:s.value});s.value=[],t.value=!0}catch(o){console.error("Ошибка при обновлении данных:",o)}}else{s.value.push(v);try{const o=await p.put(`${a}/${e.data[0].id}`,{users_subsribe:s.value});s.value=[],t.value=!1}catch(o){console.error("Ошибка при обновлении данных:",o)}}I(u.friendId)}catch(e){console.error("Ошибка при получении данных пользователя:",e)}};return F(()=>{I(u.friendId)}),(v,e)=>(r(),n("div",{class:_(["friend_container",d(f)?"themeBgwhite":"themeBgblack"])},[g("div",j,[g("div",D,[A(C,{src:c.value.user_logo||d(x)},null,8,["src"])]),c.value.user_name?(r(),n("h2",{key:0,class:_(["user_name",d(f)?"input_light":"input_night"])},k(c.value.user_name),3)):(r(),n("div",L))]),l.value?$("",!0):(r(),n("button",{key:0,onClick:e[0]||(e[0]=y=>w(b.friendId)),class:_(["friend_btn",{friend_btn_active:!t.value}]),disabled:l.value},k(t.value?"отписатся":"подписаться"),11,R)),l.value?(r(),n("button",q,e[1]||(e[1]=[g("div",{class:"loader"},null,-1)]))):$("",!0)],2))}},E=B(z,[["__scopeId","data-v-3d9263e9"]]),M={__name:"Friends",setup(b){const u=i("theme"),f=i("urlAdressAuth"),m=i("user_Id"),a=h([]),c=async()=>{try{const t=await p.get(`${f}?user_id=${m}`);a.value=t.data[0].users_subsribe}catch(t){console.log(t)}};return F(()=>{c()}),(t,l)=>(r(),n("div",{class:_(["friends-container",d(u)?"themeBgwhite":"themeBgblack"])},[g("div",{class:_(["friends_container",d(u)?"themeBgwhite":"themeBgblack"])},[a.value.length>0?(r(!0),n(N,{key:0},S(a.value,s=>(r(),V(E,{friendId:s},null,8,["friendId"]))),256)):(r(),n("h2",{key:1,class:_(["none_friends",d(u)?"input_light":"input_night"])},"У вас нет друзей.",2))],2)],2))}},U=B(M,[["__scopeId","data-v-4b0c9796"]]);export{U as default};
